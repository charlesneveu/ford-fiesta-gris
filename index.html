<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Anniv Nico Ford Fiesta</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Vue Intro Anniversaire -->
    <div id="view-intro" class="view active">
        <!-- Vid√©o de fond -->
        <video 
            id="background-video" 
            autoplay 
            loop 
            playsinline 
            webkit-playsinline
            preload="auto"
            volume="1"
            class="background-video">
            <source src="assets/fond.mp4" type="video/mp4">
        </video>
        
        <div class="intro-container">
            <!-- Feux d'artifice -->
            <div class="fireworks-container">
                <div class="firework firework-1"></div>
                <div class="firework firework-2"></div>
                <div class="firework firework-3"></div>
                <div class="firework firework-4"></div>
                <div class="firework firework-5"></div>
                <div class="firework firework-6"></div>
            </div>
            
            <!-- Confettis -->
            <div class="intro-confetti-container">
                <div class="intro-confetti intro-confetti-1"></div>
                <div class="intro-confetti intro-confetti-2"></div>
                <div class="intro-confetti intro-confetti-3"></div>
                <div class="intro-confetti intro-confetti-4"></div>
                <div class="intro-confetti intro-confetti-5"></div>
                <div class="intro-confetti intro-confetti-6"></div>
                <div class="intro-confetti intro-confetti-7"></div>
                <div class="intro-confetti intro-confetti-8"></div>
                <div class="intro-confetti intro-confetti-9"></div>
                <div class="intro-confetti intro-confetti-10"></div>
                <div class="intro-confetti intro-confetti-11"></div>
                <div class="intro-confetti intro-confetti-12"></div>
                <div class="intro-confetti intro-confetti-13"></div>
                <div class="intro-confetti intro-confetti-14"></div>
                <div class="intro-confetti intro-confetti-15"></div>
                <div class="intro-confetti intro-confetti-16"></div>
                <div class="intro-confetti intro-confetti-17"></div>
                <div class="intro-confetti intro-confetti-18"></div>
                <div class="intro-confetti intro-confetti-19"></div>
                <div class="intro-confetti intro-confetti-20"></div>
                <div class="intro-confetti intro-confetti-21"></div>
                <div class="intro-confetti intro-confetti-22"></div>
                <div class="intro-confetti intro-confetti-23"></div>
                <div class="intro-confetti intro-confetti-24"></div>
                <div class="intro-confetti intro-confetti-25"></div>
                <div class="intro-confetti intro-confetti-26"></div>
                <div class="intro-confetti intro-confetti-27"></div>
                <div class="intro-confetti intro-confetti-28"></div>
                <div class="intro-confetti intro-confetti-29"></div>
                <div class="intro-confetti intro-confetti-30"></div>
            </div>
            
            <!-- Bougies -->
            <div class="candles-container">
                <div class="candle candle-1">üïØÔ∏è</div>
                <div class="candle candle-2">üïØÔ∏è</div>
                <div class="candle candle-3">üïØÔ∏è</div>
                <div class="candle candle-4">üïØÔ∏è</div>
                <div class="candle candle-5">üïØÔ∏è</div>
            </div>
            
            <!-- Texte Joyeux Anniversaire -->
            <div class="intro-content">
                <h1 class="birthday-title">JOYEUX ANNIVERSAIRE</h1>
                <button onclick="const bgVideo = document.getElementById('background-video'); if(bgVideo) { bgVideo.classList.add('hidden'); setTimeout(function() { bgVideo.pause(); }, 500); } document.getElementById('view-intro').classList.remove('active'); document.getElementById('view-video').classList.add('active')" class="btn btn-primary btn-intro">Commencer</button>
            </div>
        </div>
    </div>

    <!-- Vue Vid√©o -->
    <div id="view-video" class="view">
        <div class="container">
            <video 
                id="main-video" 
                controls 
                playsinline 
                webkit-playsinline
                preload="metadata"
                class="video-player"
                onended="document.getElementById('end-screen').classList.remove('hidden')"
                onerror="alert('Erreur de chargement de la vid√©o. V√©rifiez votre connexion.')">
                <source src="assets/video.mp4" type="video/mp4">
                Votre navigateur ne supporte pas la lecture de vid√©os.
            </video>
            
            <!-- End Screen -->
            <div id="end-screen" class="end-screen hidden">
                <div class="end-screen-content">
                    <h2>Vid√©o termin√©e</h2>
                    <div class="button-group">
                        <button onclick="document.getElementById('main-video').currentTime=0; document.getElementById('main-video').play(); document.getElementById('end-screen').classList.add('hidden')" class="btn btn-primary">Revoir</button>
                        <button onclick="document.getElementById('view-video').classList.remove('active'); document.getElementById('view-table').classList.add('active')" class="btn btn-secondary">se r√©concilier avec Anyme</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Vue Table -->
    <div id="view-table" class="view">
        <div class="container">
            <!-- Confettis -->
            <div class="confetti-container">
                <div class="confetti confetti-1"></div>
                <div class="confetti confetti-2"></div>
                <div class="confetti confetti-3"></div>
                <div class="confetti confetti-4"></div>
                <div class="confetti confetti-5"></div>
                <div class="confetti confetti-6"></div>
                <div class="confetti confetti-7"></div>
                <div class="confetti confetti-8"></div>
                <div class="confetti confetti-9"></div>
                <div class="confetti confetti-10"></div>
                <div class="confetti confetti-11"></div>
                <div class="confetti confetti-12"></div>
                <div class="confetti confetti-13"></div>
                <div class="confetti confetti-14"></div>
                <div class="confetti confetti-15"></div>
                <div class="confetti confetti-16"></div>
                <div class="confetti confetti-17"></div>
                <div class="confetti confetti-18"></div>
                <div class="confetti confetti-19"></div>
                <div class="confetti confetti-20"></div>
            </div>
            
            <!-- G√¢teau d'anniversaire -->
            <div class="cake-container">
                <div class="cake">üéÇ</div>
            </div>
            
            <!-- Texte d'anniversaire -->
            <div class="table-content">
                <h1 class="birthday-text">Regarde sous la table !</h1>
            </div>
        </div>
    </div>

    <script>
        // Forcer la lecture de la vid√©o de fond avec son sur tous les navigateurs
        (function() {
            const bgVideo = document.getElementById('background-video');
            if (!bgVideo) return;
            
            // Fonction pour forcer la lecture avec son
            function forcePlayWithSound() {
                // Essayer directement avec son
                bgVideo.muted = false;
                const playPromise = bgVideo.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        // Succ√®s, son activ√©
                        bgVideo.muted = false;
                        console.log('Vid√©o lanc√©e avec son');
                    }).catch(error => {
                        // √âchec, essayer avec muted puis activer le son
                        console.log('Tentative avec muted puis activation son');
                        bgVideo.muted = true;
                        bgVideo.play().then(() => {
                            // Activer le son imm√©diatement
                            setTimeout(() => {
                                bgVideo.muted = false;
                                bgVideo.volume = 1;
                            }, 50);
                        }).catch(() => {
                            // Si √ßa √©choue encore, utiliser l'interaction utilisateur
                            document.body.addEventListener('click', function enableSound() {
                                bgVideo.muted = false;
                                bgVideo.volume = 1;
                                bgVideo.play();
                                document.body.removeEventListener('click', enableSound);
                            }, { once: true });
                        });
                    });
                }
            }
            
            // Essayer d√®s que possible
            if (bgVideo.readyState >= 2) {
                forcePlayWithSound();
            } else {
                bgVideo.addEventListener('loadeddata', forcePlayWithSound, { once: true });
                bgVideo.addEventListener('canplay', forcePlayWithSound, { once: true });
            }
            
            // Forcer le volume
            bgVideo.volume = 1;
            
            // Relancer si la vid√©o s'arr√™te
            bgVideo.addEventListener('pause', function() {
                this.play();
            });
            
            // S'assurer que le son reste activ√©
            bgVideo.addEventListener('play', function() {
                this.muted = false;
                this.volume = 1;
            });
            
            // Utiliser l'interaction utilisateur si disponible
            ['click', 'touchstart', 'keydown'].forEach(event => {
                document.addEventListener(event, function enableVideo() {
                    bgVideo.muted = false;
                    bgVideo.volume = 1;
                    bgVideo.play();
                    document.removeEventListener(event, enableVideo);
                }, { once: true });
            });
            
            // Forcer au chargement de la page
            window.addEventListener('load', forcePlayWithSound);
        })();
    </script>
</body>
</html>
